//================================================================================
// [pg-popup]
// version: 1.1.0
// update: 2016.11.05
//================================================================================

!function(a){var b={id:"pignose-popup",name:"PIGNOSE Popup",dev:{handler:".pignosePopupHandler"},plugin:{item:null,tint:null,doc:!0}},c={_throw:function(c,d){a.error("'"+b.name+"' load failed ("+d+"): "+c)},_bind:function(a,c,d,e){var f=c.replace(/(\w+(?=\s)?)/gi,"$1"+b.dev.handler);return a.unbind(f).bind(f,d),!!e==!0&&a.triggerHandler(f),a},_unbind:function(a,c){var d=c.replace(/(\w+(?=\s)?)/gi,"$1"+b.dev.handler);a.unbind(d)},_trigger:function(a,c){var d=c.replace(/(\w+(?=\s)?)/gi,"$1"+b.dev.handler);a.triggerHandler(d)},_excute:function(a,c){"function"==typeof a&&null!=a&&a.call(b.plugin.item,c)},_extend:function(a,b){var d=arguments;"object"==typeof a&&null!=a&&(a[b]=function(){c[b].apply(this,Array.prototype.slice.call(d,2))})},init:function(d){var e=a.extend({animate:!0,theme:"",btn_close:".btn_close",escape:!0,time:300,tint:"#000000",opacity:.6,scroll:!1,zIndex:500},d),f=this;return f.addClass(b.id),""!=typeof e.theme&&f.addClass(e.theme),b.plugin.item=f,c._excute(c.open,e),f},setTint:function(d){if(a(".pignose_tint").length<1){var e=a('<div class="pignose_tint">&nbsp;</div>');e.hide()}else var e=a(".pignose_tint");e.css({position:"fixed",left:"0",top:"0",width:"100%",height:"100%",padding:"0",margin:"0",fontSize:"0",zIndex:d.zIndex,backgroundColor:d.tint,opacity:d.opacity}),d.escape===!0&&c._bind(e,"click",function(){c._excute(c.close,d)}),e.appendTo("body"),b.plugin.tint=e,d.animate===!0?e.stop().fadeIn(d.time):e.show()},setPopup:function(b){var d=a(window),e=this.each(function(){var c=a(this);c.css({position:"absolute",zIndex:b.zIndex+1}),b.animate===!0?c.stop().fadeIn(b.time):c.show()});c._bind(d,"resize",function(){e.each(function(){var b=a(this);b.css({left:(d.width()-b.outerWidth(!0))/2,top:(d.height()-b.outerHeight(!0))/2+d.scrollTop(),left:(d.width()-b.outerWidth(!0))/2+d.scrollLeft()})})},!0),b.scroll===!0&&c._bind(d,"scroll",function(){e.css({top:(d.height()-e.outerHeight(!0))/2+d.scrollTop(),left:(d.width()-e.outerWidth(!0))/2+d.scrollLeft()})}),c._bind(e,"close",function(){c._excute(c.close,b)}),c._bind(e,"click",function(a){a.stopPropagation()}),c._bind(e.find(b.btn_close),"click",function(a){c._excute(c.close,b),a.preventDefault()})},open:function(a){c._excute(c.setTint,a),c._excute(c.setPopup,a)},close:function(a){a.animate===!0?(this.stop().fadeOut(a.time),b.plugin.tint.stop().fadeOut(a.time)):(this.hide(),b.plugin.tint.hide())}};a.fn.pignosePopup=function(a){var b=1;return"function"==typeof c[a]?c[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?(c._throw("an error has occurred in initialization.",0),b):c.init.apply(this,arguments)}}(jQuery);